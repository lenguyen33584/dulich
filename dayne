<section class="hotel-rooms-section">
  <div id="hang-phong" class="hotel-rooms-container">
    <?php if( have_rows('loai_phong') ): ?>
      <?php while( have_rows('loai_phong') ): the_row(); 
        $ten_phong = get_sub_field('ten_phong');
        $anh_phong_raw = get_sub_field('anh_phong_1'); // textarea: 1 ảnh mỗi dòng
        $anh_phong = array_filter(array_map('trim', explode("\n", $anh_phong_raw)));
        $dien_tich = get_sub_field('dien_tich_phong');
        $so_nguoi = get_sub_field('so_nguoi');
        $huong_phong = get_sub_field('huong_phong');
        $so_giuong = get_sub_field('so_giuong');
        $vat = get_sub_field('vat');
        $bua_an = get_sub_field('bua_an');
        $gia = get_sub_field('gia_tour');
        $ten_phong_slug = 'phong-' . sanitize_title($ten_phong);
      ?>
      <div class="room-card">
        <div class="room-image">
          <?php if ($anh_phong && is_array($anh_phong)): ?>
            <img src="<?php echo esc_url($anh_phong[0]); ?>" alt="<?php echo esc_attr($ten_phong); ?>">
          <?php endif; ?>
        </div>

        <div class="room-info">
          <h3><?php echo esc_html($ten_phong); ?></h3>

          <?php if (!empty($anh_phong)): ?>
            <div class="room-detail-link">
                <a href="javascript:void(0);" class="open-fancybox" data-gallery="<?php echo esc_attr($ten_phong_slug); ?>">
                    Chi tiết phòng &nbsp;›
                </a>

                <?php foreach ($anh_phong as $anh): ?>
                    <a href="<?php echo esc_url($anh); ?>"
                    data-fancybox="<?php echo esc_attr($ten_phong_slug); ?>"
                    style="display:none;">
                    </a>
                <?php endforeach; ?>
            </div>
            <?php endif; ?>

          <div class="room-info-grid">
            <div><strong>Diện tích:</strong> <?php echo esc_html($dien_tich); ?>m²</div>
            <div><strong>Sức chứa:</strong> <?php echo esc_html($so_nguoi); ?></div>
            <div><strong>Hướng:</strong> <?php echo esc_html($huong_phong); ?></div>
            <div><strong>Giường:</strong> <?php echo esc_html($so_giuong); ?></div>
          </div>

          <div class="room-sub-info">
            <div><strong>✔️ ĐÃ </strong>bao gồm thuế VAT và phí dịch vụ.</div>
            <div><strong>✔️ ĐÃ </strong>bao gồm ăn sáng.</div>
          </div>

          <a href="/thanh-toan-2?price=<?php echo $gia; ?>" class="room-price-box">
            <?php echo number_format($gia, 0, ',', '.'); ?>đ
          </a>
          <a href="/thanh-toan-2?price=<?php echo $gia; ?>" class="room-price-box">Thanh toán ngay</a>
        </div>
      </div>
      <?php endwhile; ?>
    <?php endif; ?>
  </div>
  <div class="hotel-default-policy">
  <h3><strong>Quy định nhận & trả phòng</strong></h3>
  <p><strong>Thời gian nhận phòng:</strong> 14:00</p>
  <p><strong>Thời gian trả phòng:</strong> 12:00</p>

  <hr>

  <p><strong>Quy định nhận phòng:</strong></p>
  <ul>
    <li>CCCD hoặc passport.</li>
    <li>Phiếu xác nhận đặt phòng của hệ thống.</li>
  </ul>
  <p style="color: red;"><strong>*Lưu ý:</strong><br>
    Theo quy định của pháp luật Việt Nam, khi 1 khách nước ngoài + 1 khách Việt Nam ở chung phòng thì yêu cầu phải có giấy đăng ký kết hôn.
  </p>

  <hr>

  <h3><strong>Quy định hủy/đổi đặt phòng</strong></h3>
  <ul>
    <li>Phí hủy/đổi = phí hủy của khách sạn + phí xử lý giao dịch.</li>
    <li><strong>Phí hủy/đổi của khách sạn được quy định như sau:</strong></li>
    <ul>
      <li>Không hoàn phòng, nhưng được phép đổi đơn đặt phòng.</li>
    </ul>
    <li><strong>Phí xử lý giao dịch:</strong></li>
    <ul>
      <li>Dưới 3 triệu: 2% tổng giá trị (tối thiểu 30.000đ)</li>
      <li>Trên 3 triệu: 1.5% tổng giá trị</li>
    </ul>
  </ul>

  <hr>

  <h3><strong>Trẻ em và giường phụ</strong></h3>
  <ul>
    <li><strong>Em bé (dưới 5 tuổi):</strong> Miễn phí nếu ngủ cùng bố mẹ.</li>
    <li><strong>Trẻ em (5–10 tuổi):</strong> Thu theo quy định khách sạn.</li>
  </ul>

</div>
</section>
